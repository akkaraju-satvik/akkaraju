<div class="container fadeInFast">
  <div class="row flex-row justify-content-between align-items-center p-3">
    <h3 class="col m-3">My files üìÅ</h3>
    <div class="col-auto" (change)="firebaseStorageService.uploadFile($event)">
      <button mat-stroked-button class="btn btn-outline-primary">Upload file</button>
    </div>
  </div>
  <div class="my-3" *ngIf="!firebaseStorageService.storageItemsLoad && !firebaseStorageService.storagePrefixesLoad">
    <div class="card" style="background-color: #fff6;">
      <div class="col-md-12">
        <div class="card-body h-auto">
          <div class="col-md-12">
            <div class="row p-3 pb-0">
              <h6>Directories</h6>
            </div>
            <div class="row m-3">
              <ng-container *ngFor="let prefix of firebaseStorageService.storagePrefixes">
                <div class="col-auto card p-0 me-2">
                  <div class="card-body p-1">
                    <button mat-button color="white" class="btn btn-secondary btn-sm" (click)="firebaseStorageService.getPrefixFiles(prefix)"><code>{{!prefix.isParent ? prefix.name+'/' : '../'}}</code></button>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
          <div class="col-md-12" *ngIf="firebaseStorageService.storageItems.length > 0">
            <div class="row p-3 pb-0">
              <h6>Files</h6>
            </div>
            <div class="row m-3">
              <ng-container *ngFor="let file of firebaseStorageService.storageItems">
                <div class="col-auto card p-0 me-2">
                  <div class="card-body p-1">
                    <a mat-button color="white" class="btn btn-secondary btn-sm" [href]="file.url">{{file.name}}</a>
                  </div>
                </div>
              </ng-container>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex flex-column justify-content-center align-items-center my-3" *ngIf="firebaseStorageService.storageItemsLoad || firebaseStorageService.storagePrefixesLoad">
    <div class="spinner-border text-primary mb-3" role="status">
    </div>    
    <span *ngIf="authService.authData.user.role === 'user'">Please wait while we are fetching the files</span>
    <span *ngIf="authService.authData.user.role === 'admin'">Please wait while we are fetching your files</span>
  </div>
</div>
